(version 0.2)
(definteger code)
(definteger faultNum)
(definteger intrInfo)
(definteger port)
(definteger qual)
(defstring str)
(definteger wasIn)
(defun vt_pretty_print()( do  ( setint code   VMCS_EXIT_REASON)( sprintf    str  "%3d "  code )( cond  ( (== code  0 )( do  ( setint intrInfo   VMCS_EXIT_INTR_INFO)( setint faultNum    (& intrInfo  255 ))( sprintf    str  "%s softint exc %d"  str  faultNum )( cond  ( (== faultNum  14 )( do  ( sprintf    str  "%s #PF @%#llx"  str  VMCS_EXIT_QUAL )))))))( cond  ( (== code  1 )( do  ( setint intrInfo   VMCS_EXIT_INTR_INFO)( sprintf    str  "%s hwIRQ %03d"  str   (& intrInfo  255 ) ))))( cond  ( (== code  12 )( do  ( sprintf    str  "%s HLT"  str ))))( cond  ( (== code  14 )( do  ( sprintf    str  "%s INVLPG @%#llx"  str  VMCS_EXIT_QUAL ))))( cond  ( (== code  28 )( do  ( setint qual   VMCS_EXIT_QUAL)( sprintf    str  "%s CR%1d"  str   (& qual  15 ) )( cond  ( (& qual   (<< 1  4 ) )( do  ( sprintf    str  "%s WRITE "  str ))) (1 ( do  ( sprintf    str  "%s READ  "  str )))))))( cond  ( (== code  30 )( do  ( setint qual   VMCS_EXIT_QUAL)( setint wasIn    (& qual   (<< 1  3 ) ))( setint port    (&  (>> qual  16 )  4095 ))( cond  (wasIn( do  ( sprintf    str  "%s %s"  str  "IN  " ))) (1 ( do  ( sprintf    str  "%s %s"  str  "OUT " ))))( sprintf    str  "%s port %04x"  str  port ))))( cond  ( (== code  43 )( do  ( sprintf    str  "%s TPR"  str )))))str)